@using F1App.Components.Pages
@using F1App.Models.ErgastApiModels
@using System.Collections.ObjectModel


@if (Results is not null)
{
    <MudSimpleTable Class="rounded-xl" Dense="true" Striped="true" FixedHeader="true">
        <thead>
            <tr>
                <th>Pos</th>
                <th>Driver</th>
                <th>Constructor</th>
                <th>Time</th>
                <th>Points</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var result in Results)
            {
                <tr>
                    <td>@result.position</td>
                    <td>@result.Driver.familyName[0]@result.Driver.familyName[1]@result.Driver.familyName[2]</td>
                    <td>@result.Constructor.name</td>
                    <td>@(result.Time?.time ?? result.status)</td>
                    <td>@result.points</td>
                </tr>
            }
        </tbody>
    </MudSimpleTable>
}
else if(QualifyingResults is not null)
{
    <MudSimpleTable Class="rounded-xl" Dense="true" Striped="true" FixedHeader="true">
        <thead>
            <tr>
                <th>Pos</th>
                <th>Driver</th>
                <th>Constructor</th>
                <th>Q1</th>
                <th>Q2</th>
                <th>Q3</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var result in QualifyingResults)
            {
                <tr>
                    <td>@result.position</td>
                    <td>@result.Driver.familyName[0]@result.Driver.familyName[1]@result.Driver.familyName[2]</td>
                    <td>@result.Constructor.name</td>
                    <td>@result.Q1</td>
                    <td>@result.Q2</td>
                    <td>@result.Q3</td>
                </tr>
            }
        </tbody>
    </MudSimpleTable>
}
else if (SprintResults is not null)
{
<MudSimpleTable Class="rounded-xl" Dense="true" Striped="true" FixedHeader="true">
    <thead>
        <tr>
            <th>Pos</th>
            <th>Driver</th>
            <th>Constructor</th>
            <th>Time</th>
            <th>Points</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var result in SprintResults)
        {
            <tr>
                <td>@result.position</td>
                <td>@result.Driver.familyName[0]@result.Driver.familyName[1]@result.Driver.familyName[2]</td>
                <td>@result.Constructor.name</td>
                <td>@(result.Time?.time ?? result.status)</td>
                <td>@result.points</td>
            </tr>
        }
    </tbody>
</MudSimpleTable>
}

@code {

    [Parameter]
    public ObservableCollection<Result> Results { get; set; }
    [Parameter]
    public ObservableCollection<SprintResult> SprintResults { get; set; }
    [Parameter]
    public ObservableCollection<QualifyingResult> QualifyingResults { get; set; }

}
